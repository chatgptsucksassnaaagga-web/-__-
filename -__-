local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local RELAY_URL = "https://YOUR_RELAY_URL/servers"
local PLACE_ID = game.PlaceId

local gui = Instance.new("ScreenGui")
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local main = Instance.new("Frame")
main.Size = UDim2.fromScale(0.32, 0.62)
main.Position = UDim2.fromScale(0.34, 0.19)
main.BackgroundColor3 = Color3.fromRGB(14, 14, 14)
main.BorderSizePixel = 0
main.Parent = gui
Instance.new("UICorner", main).CornerRadius = UDim.new(0, 12)
local mainStroke = Instance.new("UIStroke", main)
mainStroke.Color = Color3.fromRGB(130, 35, 35)
mainStroke.Thickness = 1

local header = Instance.new("Frame")
header.Size = UDim2.fromScale(1, 0.14)
header.BackgroundColor3 = Color3.fromRGB(18, 18, 18)
header.BorderSizePixel = 0
header.Parent = main

local headerPad = Instance.new("UIPadding", header)
headerPad.PaddingLeft = UDim.new(0, 18)
headerPad.PaddingRight = UDim.new(0, 18)

local title = Instance.new("TextLabel")
title.Size = UDim2.fromScale(0.4, 1)
title.BackgroundTransparency = 1
title.Text = "Krypth AJ"
title.Font = Enum.Font.GothamSemibold
title.TextSize = 20
title.TextColor3 = Color3.fromRGB(240, 240, 240)
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = header

local nav = Instance.new("Frame")
nav.Size = UDim2.fromScale(0.6, 1)
nav.Position = UDim2.fromScale(0.4, 0)
nav.BackgroundTransparency = 1
nav.Parent = header

local navLayout = Instance.new("UIListLayout", nav)
navLayout.FillDirection = Enum.FillDirection.Horizontal
navLayout.HorizontalAlignment = Enum.HorizontalAlignment.Right
navLayout.VerticalAlignment = Enum.VerticalAlignment.Center
navLayout.Padding = UDim.new(0, 12)

local function navButton(text)
	local b = Instance.new("TextButton")
	b.Size = UDim2.fromScale(0.28, 0.55)
	b.BackgroundColor3 = Color3.fromRGB(130, 35, 35)
	b.Text = text
	b.Font = Enum.Font.GothamMedium
	b.TextSize = 14
	b.TextColor3 = Color3.fromRGB(255, 255, 255)
	b.BorderSizePixel = 0
	Instance.new("UICorner", b).CornerRadius = UDim.new(0, 8)
	return b
end

local autoBtn = navButton("AUTO JOIN")
autoBtn.Parent = nav

local actBtn = navButton("ACTIVITY")
actBtn.Parent = nav

local content = Instance.new("Frame")
content.Size = UDim2.fromScale(1, 0.86)
content.Position = UDim2.fromScale(0, 0.14)
content.BackgroundColor3 = Color3.fromRGB(12, 12, 12)
content.BorderSizePixel = 0
content.Parent = main

local sectionBar = Instance.new("Frame")
sectionBar.Size = UDim2.fromScale(1, 0.1)
sectionBar.BackgroundTransparency = 1
sectionBar.Parent = content

local section = Instance.new("TextLabel")
section.Size = UDim2.fromScale(0.6, 1)
section.Position = UDim2.fromScale(0.06, 0)
section.BackgroundTransparency = 1
section.Text = "Activity"
section.Font = Enum.Font.GothamSemibold
section.TextSize = 16
section.TextXAlignment = Enum.TextXAlignment.Left
section.TextColor3 = Color3.fromRGB(220, 220, 220)
section.Parent = sectionBar

local clear = Instance.new("TextButton")
clear.Size = UDim2.fromScale(0.18, 0.55)
clear.Position = UDim2.fromScale(0.76, 0.22)
clear.BackgroundColor3 = Color3.fromRGB(130, 35, 35)
clear.Text = "CLEAR"
clear.Font = Enum.Font.GothamMedium
clear.TextSize = 13
clear.TextColor3 = Color3.fromRGB(255, 255, 255)
clear.BorderSizePixel = 0
Instance.new("UICorner", clear).CornerRadius = UDim.new(0, 8)
clear.Parent = sectionBar

local list = Instance.new("ScrollingFrame")
list.Size = UDim2.fromScale(0.9, 0.86)
list.Position = UDim2.fromScale(0.05, 0.12)
list.CanvasSize = UDim2.new()
list.ScrollBarImageTransparency = 1
list.BackgroundTransparency = 1
list.Parent = content

local listLayout = Instance.new("UIListLayout", list)
listLayout.Padding = UDim.new(0, 14)

listLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
	list.CanvasSize = UDim2.new(0, 0, 0, listLayout.AbsoluteContentSize.Y + 10)
end)

local empty = Instance.new("TextLabel")
empty.Size = UDim2.fromScale(1, 1)
empty.BackgroundTransparency = 1
empty.Text = "Waiting for good servers..."
empty.Font = Enum.Font.Gotham
empty.TextSize = 14
empty.TextColor3 = Color3.fromRGB(150, 150, 150)
empty.Parent = list

local function card(data)
	local f = Instance.new("Frame")
	f.Size = UDim2.fromScale(1, 0.14)
	f.BackgroundColor3 = Color3.fromRGB(18, 18, 18)
	f.BorderSizePixel = 0
	Instance.new("UICorner", f).CornerRadius = UDim.new(0, 10)
	local s = Instance.new("UIStroke", f)
	s.Color = Color3.fromRGB(130, 35, 35)
	s.Thickness = 1

	local info = Instance.new("TextLabel")
	info.Size = UDim2.fromScale(0.6, 1)
	info.Position = UDim2.fromScale(0.05, 0)
	info.BackgroundTransparency = 1
	info.TextXAlignment = Enum.TextXAlignment.Left
	info.Text = "MPS "..data.mps.."   |   "..data.players.."/"..data.maxPlayers
	info.Font = Enum.Font.Gotham
	info.TextSize = 14
	info.TextColor3 = Color3.fromRGB(235, 235, 235)
	info.Parent = f

	local join = Instance.new("TextButton")
	join.Size = UDim2.fromScale(0.22, 0.42)
	join.Position = UDim2.fromScale(0.72, 0.12)
	join.BackgroundColor3 = Color3.fromRGB(45, 150, 85)
	join.Text = "JOIN"
	join.Font = Enum.Font.GothamMedium
	join.TextSize = 13
	join.TextColor3 = Color3.fromRGB(255, 255, 255)
	join.BorderSizePixel = 0
	Instance.new("UICorner", join).CornerRadius = UDim.new(0, 8)
	join.Parent = f

	local del = Instance.new("TextButton")
	del.Size = UDim2.fromScale(0.22, 0.42)
	del.Position = UDim2.fromScale(0.72, 0.52)
	del.BackgroundColor3 = Color3.fromRGB(150, 45, 45)
	del.Text = "DEL"
	del.Font = Enum.Font.GothamMedium
	del.TextSize = 13
	del.TextColor3 = Color3.fromRGB(255, 255, 255)
	del.BorderSizePixel = 0
	Instance.new("UICorner", del).CornerRadius = UDim.new(0, 8)
	del.Parent = f

	join.MouseButton1Click:Connect(function()
		TeleportService:TeleportToPlaceInstance(PLACE_ID, data.jobId, player)
	end)

	del.MouseButton1Click:Connect(function()
		f:Destroy()
	end)

	return f
end

local function refresh()
	for _, c in ipairs(list:GetChildren()) do
		if c:IsA("Frame") then c:Destroy() end
	end
	empty.Visible = true

	local ok, data = pcall(function()
		return HttpService:JSONDecode(game:HttpGet(RELAY_URL))
	end)
	if not ok then return end

	table.sort(data, function(a, b)
		return (a.mps or 0) > (b.mps or 0)
	end)

	for _, s in ipairs(data) do
		if s.placeId == PLACE_ID then
			empty.Visible = false
			card(s).Parent = list
		end
	end
end

autoBtn.MouseButton1Click:Connect(refresh)
actBtn.MouseButton1Click:Connect(refresh)
clear.MouseButton1Click:Connect(function()
	for _, c in ipairs(list:GetChildren()) do
		if c:IsA("Frame") then c:Destroy() end
	end
	empty.Visible = true
end)

UserInputService.InputBegan:Connect(function(i, g)
	if g then return end
	if i.KeyCode == Enum.KeyCode.LeftControl then
		gui.Enabled = not gui.Enabled
	end
end)

refresh()
